(function() {
  var Promise, Runner, exec;

  exec = require('child_process').exec;

  Promise = require('./config').Promise;

  Runner = {
    execute: function(command, options, callback) {
      return new Promise(function(resolve, reject) {
        return exec(command.toString(), options, function(err, stdout, stderr) {
          var result;
          result = options.processResult ? options.processResult(err, stdout, stderr) : stdout;
          if (callback != null) {
            callback(err, result, stderr);
          }
          if (err != null) {
            return reject(err, result, stderr);
          } else {
            return resolve(result, stderr);
          }
        });
      });
    }
  };

  module.exports = Runner;

}).call(this);
